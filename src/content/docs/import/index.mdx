---
title: Import data
---

import { CardGrid, LinkCard } from '@astrojs/starlight/components';

There are multiple ways to import data in Kùzu. The only prerequisite for inserting data
into a database is that you first create a graph schema, i.e., the structure of your node and relationship tables.

For small graphs (a few thousand nodes), the `CREATE` and `MERGE` [Cypher clauses](/cypher/data-manipulation-clauses)
can be used to insert nodes and
relationships. These are similar to SQL's `INSERT` statements, but bear in mind that they are slower than the bulk import
options shown below. The `CREATE`/`MERGE` clauses are intended to do small additions or updates on a sporadic basis.

In general, the recommended approach is to use `COPY FROM` (rather than creating or
merging nodes one by one), for larger graphs of millions of nodes and beyond.
This is the fastest way to bulk insert data into Kùzu.

The following sections show how to bulk import data using `COPY FROM` on various data formats.

<CardGrid>

    <LinkCard
    title="Copy from CSV"
    href="/import/csv"
    />

    <LinkCard
    title="Copy from Parquet"
    href="/import/parquet"
    />

    <LinkCard
    title="Copy from NumPy"
    href="/import/npy"
    />

    <LinkCard
    title="Copy from subquery"
    href="/import/copy-from-subquery"
    />

    <LinkCard
    title="Copy from DataFrame"
    href="/import/copy-from-dataframe"
    />

    <LinkCard
    title="Copy from JSON"
    href="/extensions/json#copy-from"
    />

</CardGrid>

## `COPY FROM` a partial subset

In certain cases, you may only want to partially fill your Kùzu table using the data from your input
source. This is common in cases where you want to create extra columns during DDL that will hold
a default value, and only a subset of the Kùzu table's columns are filled during the `COPY` operation.

This is better illustrated with an example. Consider a case where you have a CSV file `person.csv`
that has 3 columns: `id`, `name` and `age`.
Assume you have a data model where you want to attach and addtional property to a `Person` node,
i.e., the address they live in, initially populated as nulls but to be filled in with appropriate
values at a later time.

The DDL for the `Person` node table is as follows:
```sql
CREATE NODE TABLE Person(id INT64, name STRING, age INT64, address STRING, PRIMARY KEY(id));
```

However, the given CSV file to `COPY FROM` has only 3 columns -- the address information will be
obtained from another source.

In such a case, you can explicitly tell the `COPY` pipeline to partially fill the node table and
only map the named columns from the CSV file as follows:

```sql
COPY Person(id, name, age) FROM 'person.csv'
```

This will only copy the `id`, `name` and `age` columns from the CSV file, while filling the fourth
column, `address` with null values. These values can be populated at a later time via `MERGE`.

:::caution[Note]
The above approach only works when the input data source contains *fewer* columns than exists in the
node table being copied into. If the node table had fewer columns than the data source, it would
lead to a Runtime error because of a column number mismatch.
:::

## Copy large relationship tables

Importing large relationship tables from external files (100M+ scale) can use significant amounts of memory.
If the memory used to prepare the
imported relationship table data comes close to exceeding the buffer pool size,
Kùzu will spill some of this data to a `copy.tmp` file in the database directory.
The location of this file can be customized using the
[`spill_to_disk_tmp_file`](/cypher/configuration#configure-spill-to-disk-temporary-file) setting.
You can also disable spilling to disk by setting `spill_to_disk_tmp_file` to an empty string.

This feature is disabled by default for in-memory databases and databases using file system extensions,
but can be enabled for these cases by setting a custom `spill_to_disk_tmp_file` path.
