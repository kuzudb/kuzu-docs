---
title: Files Managed by Kuzu
---

## Database files

Prior to v0.11.0, Kuzu required the database path to be a directory and automatically created and managed multiple files within that directory.

Starting from v0.11.0, Kuzu switched to a single-file format, where the database path is required to be a file rather than a directory.
This change makes it easier to move and share databases. 
The single-file format has also been adopted by other database systems, such as DuckDB and SQLite.

When opening a Kuzu database in on-disk read-write mode, Kuzu creates a file at the specified path if it doesn't exist.
Additionally, temporary files might be created during runtime.

We list all types of files that may be created and maanged by Kuzu in the following table:

| File Type | Example |
| --- | --- |
| Database file | `db_file` |
| Lock file | `db_file.lock` |
| WAL file | `db_file.wal`  |
| Shadow file | `db_file.shadow` |
| Tmp file | `db_file.tmp` |
| Extension files | `~/.kuzu/extensions/0.11.0/osx_arm64/json/libjson.kuzu_extension` |

#### Database file
Stores all on-disk data of the database since the last checkpoint. 

#### Lock file
Created to ensure that no two Kuzu `Database` objects can open the same database file simultaneously when one of them is in the read-write mode. 
The lock file is removed when the database exits.

For more details, please see [Limitations of creating multiple database objects](https://docs.kuzudb.com/concurrency/#limitations-of-creating-multiple-database-objects). 

#### WAL file
Records all transaction changes since the last checkpoint. The file is only created when write transactions are committed in the database, and is removed when a checkpoint succeeds.

#### Shadow file
A temporary file created during the checkpoint phase.
It is only created when the database starts a checkpoint, and is removed when the database exits.

#### Tmp file
A temporary file for spilling in-memory intermediate data during query execution.
This file is only created when the database's memory pressure is high and there is a need to spill intermediate data.
Once created, it is removed when the database exits.

## Extension binaries and HTTPS local cache
Whenever a user executes `INSTALL extension_name`, Kuzu downloads the extension binaries from the official repo into a local directory `~/.kuzu/extensions`.
When loading an extension (`LOAD extension_name`), Kuzu reads from the local extension directory `~/.kuzu/extensions` by default.

Additionally, for the `httpfs` extension, when its [local cache](https://docs.kuzudb.com/extensions/httpfs/#local-cache) is enabled (`CALL HTTP_CACHE_FILE=TRUE;`), Kuzu saves the locally cached files under `.cache` in the extension's local directory.
The locally cached files are always removed when the transaction commits or rolls back.

## Shell files
#### History file
The Kuzu shell creates a `history.txt` file in the directory where the shell is opened. The file records a list of commands executed within the shell.
